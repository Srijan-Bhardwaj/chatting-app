{"version":3,"sources":["Messenger.module.css","Messages.module.css","Messages.jsx","Firebase.js","insight-578.mp3","hollow-582.mp3","Messenger.jsx","App.js","index.js"],"names":["module","exports","Messages","props","className","Style","container","style","alignSelf","sender","wrapper","backgroundColor","borderTopLeftRadius","borderBottomRightRadius","textAlign","color","info","name","text","details","time","toLocaleDateString","toLocaleTimeString","db","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","firestore","Messenger","useSound","receive","playReceive","send","playSend","messageEndRef","useRef","useState","user","Setuser","myMessage","SetmyMessage","data","Setdata","username","typer","Settyper","useEffect","current","scrollIntoView","behavior","length","collection","orderBy","onSnapshot","snapshot","docs","map","doc","set","setTimeout","prompt","card","logo","icon","messages","item","message","timestamp","Date","seconds","ref","type","onSubmit","e","preventDefault","add","FieldValue","serverTimestamp","placeholder","onChange","event","target","value","required","submit","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.12c26825.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Messenger_container__gA902\",\"card\":\"Messenger_card__3SCKJ\",\"move\":\"Messenger_move__2Bk8o\",\"logo\":\"Messenger_logo__1lqdr\",\"icon\":\"Messenger_icon__H5jjp\",\"messages\":\"Messenger_messages__1A6Tp\",\"typer\":\"Messenger_typer__2uVDU\",\"type\":\"Messenger_type__1YdDg\",\"submit\":\"Messenger_submit__PgnE3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Messages_container__KReUA\",\"fade\":\"Messages_fade__5g-Gr\",\"wrapper\":\"Messages_wrapper__qlgLc\",\"info\":\"Messages_info__4NuBQ\",\"details\":\"Messages_details__1dItq\"};","\r\nimport React from 'react';\r\nimport Style from './Messages.module.css';\r\n\r\nconst Messages=(props)=>{\r\n    return(\r\n        <>\r\n        <div className={Style.container} style={{alignSelf:(props.sender===true)?'flex-end':'flex-start'}}>\r\n            <div className={Style.wrapper} style={{alignSelf:(props.sender===true)?'flex-end':'flex-start',backgroundColor:(props.sender===true)?'aqua':'lightgrey',borderTopLeftRadius:(props.sender===true)?'5px':'0',borderBottomRightRadius:(props.sender===true)?'0':'5px'}}><div style={{textAlign:(props.sender===true)?'right':'left',color:(props.sender===true)?'blue':'red'}} className={Style.info}>{props.name}</div>{props.text}</div>\r\n            <div className={Style.details} style={{alignSelf:(props.sender===true)?'flex-end':'flex-start'}}>{props.time.toLocaleDateString()} {props.time.toLocaleTimeString()}</div>\r\n        </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Messages;","import firebase from 'firebase';\r\n\r\nconst firebaseApp = firebase.initializeApp({\r\n    apiKey: \"AIzaSyA20No1Szz3Gu2aLWUjv-AwqLALwHCl12Y\",\r\n  authDomain: \"sandesh-chatting-app.firebaseapp.com\",\r\n  projectId: \"sandesh-chatting-app\",\r\n  storageBucket: \"sandesh-chatting-app.appspot.com\",\r\n  messagingSenderId: \"128133152544\",\r\n  appId: \"1:128133152544:web:01b451d3fdae452fc16145\"\r\n});\r\n\r\nconst db = firebaseApp.firestore();\r\n\r\nexport default db;","export default __webpack_public_path__ + \"static/media/insight-578.e7e8aabb.mp3\";","export default __webpack_public_path__ + \"static/media/hollow-582.f193bf16.mp3\";","import React, { useEffect, useState, useRef } from \"react\";\r\nimport Style from \"./Messenger.module.css\";\r\nimport ForumIcon from \"@material-ui/icons/Forum\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\nimport Messages from \"./Messages\";\r\nimport db from \"./Firebase\";\r\nimport firebase from \"firebase\";\r\nimport useSound from \"use-sound\";\r\nimport receive from \"./insight-578.mp3\";\r\nimport send from './hollow-582.mp3';\r\n\r\nconst Messenger = () => {\r\n  const [playReceive] = useSound(receive);\r\n  const [playSend] = useSound(send)\r\n  const messageEndRef = useRef(null);\r\n  const [user, Setuser] = useState(\"unknown\");\r\n  const [myMessage, SetmyMessage] = useState(\"\");\r\n  const [data, Setdata] = useState([]);\r\n  const [typer, Settyper] = useState({ username: null });\r\n\r\n  useEffect(() => {\r\n    messageEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n    if(data.length>0 && data[data.length-1].username!=user){\r\n      playReceive();\r\n    }\r\n  }, [data]);\r\n\r\n  useEffect(() => {\r\n    db.collection(\"messages\")\r\n      .orderBy(\"timestamp\", \"asc\")\r\n      .onSnapshot((snapshot) => {\r\n        Setdata(\r\n          snapshot.docs.map((doc) => {\r\n            return doc.data();\r\n          })\r\n        );\r\n      });\r\n    db.collection(\"typer\")\r\n      .doc(\"typer\")\r\n      .onSnapshot((doc) => {\r\n        Settyper(doc.data());\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (typer.username == null || typer.username === \"\") {\r\n      db.collection(\"typer\").doc(\"typer\").set({\r\n        username: user,\r\n      });\r\n      setTimeout(() => {\r\n        db.collection(\"typer\").doc(\"typer\").set({\r\n          username: null,\r\n        });\r\n      }, 1000);\r\n    }\r\n  }, [myMessage]);\r\n\r\n  useEffect(() => {\r\n    const name = prompt(\"enter name\");\r\n    Setuser(name == null || name == \"\" ? \"unknown\" : name);\r\n  }, []);\r\n\r\n  const clicked = (e) => {\r\n    e.preventDefault();\r\n    db.collection(\"messages\").add({\r\n      message: myMessage,\r\n      username: user,\r\n      timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n    });\r\n    playSend();\r\n    SetmyMessage(\"\");\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className={Style.container}>\r\n        <div className={Style.card}>\r\n          <div className={Style.logo}>\r\n            <ForumIcon className={Style.icon} />\r\n            <div className={Style.typer}>\r\n              {typer.username === null ||\r\n              typer.username === user ||\r\n              typer.username === \"\"\r\n                ? \"\"\r\n                : `${typer.username} is typing...`}\r\n            </div>\r\n          </div>\r\n          <div className={Style.messages}>\r\n            {data.map((item) => {\r\n              return (\r\n                <>\r\n                  <Messages\r\n                    text={item.message}\r\n                    sender={item.username === user ? true : false}\r\n                    name={item.username === user ? \"\" : item.username}\r\n                    time={\r\n                      item.timestamp\r\n                        ? new Date(item.timestamp.seconds * 1000)\r\n                        : new Date()\r\n                    }\r\n                  />\r\n                  <div ref={messageEndRef} />\r\n                </>\r\n              );\r\n            })}\r\n          </div>\r\n          <div className={Style.type}>\r\n            <form onSubmit={clicked}>\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Type your message...\"\r\n                onChange={(event) => {\r\n                  SetmyMessage(event.target.value);\r\n                }}\r\n                required\r\n                value={myMessage}\r\n              ></input>\r\n              <button type=\"submit\" className={Style.submit}>\r\n                <SendIcon />\r\n              </button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Messenger;\r\n","import React from 'react';\r\nimport Messenger from './Messenger.jsx';\r\n\r\nconst App = () => {\r\n    return (\r\n        <>\r\n            <Messenger/>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}