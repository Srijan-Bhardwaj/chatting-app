(this.webpackJsonpmessenger=this.webpackJsonpmessenger||[]).push([[0],{23:function(e,t,a){e.exports={container:"Messenger_container__gA902",card:"Messenger_card__3SCKJ",expand:"Messenger_expand__1JKtX",logo:"Messenger_logo__1lqdr",icon:"Messenger_icon__H5jjp",messages:"Messenger_messages__1A6Tp",typer:"Messenger_typer__2uVDU",type:"Messenger_type__1YdDg",progress:"Messenger_progress___pk2R",submit:"Messenger_submit__PgnE3"}},29:function(e,t,a){e.exports={container:"Messages_container__KReUA",fade:"Messages_fade__5g-Gr",wrapper:"Messages_wrapper__qlgLc",imgWrapper:"Messages_imgWrapper__Juju-",view:"Messages_view__d1Nrs",info:"Messages_info__4NuBQ",details:"Messages_details__1dItq"}},34:function(e,t,a){e.exports={container:"LandingPage_container__3VCR5",card:"LandingPage_card__-T9uK",createRoom:"LandingPage_createRoom__R8hWc"}},35:function(e,t,a){e.exports={container:"JoinRoom_container__1Ppbo",card:"JoinRoom_card__1yQ4K",heading:"JoinRoom_heading__3czZt",colorPicker:"JoinRoom_colorPicker__2BlpB",btn:"JoinRoom_btn__1V2km"}},36:function(e,t,a){e.exports={wrapper:"CreateRoom_wrapper__3pr8t",card:"CreateRoom_card__34RiV",heading:"CreateRoom_heading__e6caZ",password:"CreateRoom_password__1ICTI",btn:"CreateRoom_btn__33LWt"}},66:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(30),s=a.n(r),c=(a(66),a(51)),o=a(40),i=a.n(o),l=a(46),m=a(12),d=a(23),u=a.n(d),j=a(58),p=a.n(j),b=a(59),g=a.n(b),f=a(29),h=a.n(f),O=a(3),x=function(e){return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:h.a.container,style:{alignSelf:!0===e.sender?"flex-end":"flex-start"},children:[Object(O.jsxs)("div",{className:h.a.wrapper,style:{alignSelf:!0===e.sender?"flex-end":"flex-start",backgroundColor:!0===e.sender?"lightseagreen":"lightslategrey",borderTopLeftRadius:!0===e.sender?"5px":"0",borderBottomRightRadius:!0===e.sender?"0":"5px"},children:[Object(O.jsx)("div",{style:{textAlign:!0===e.sender?"right":"left",color:!0===e.sender?"none":"#B22222"},className:h.a.info,children:e.name}),e.url?Object(O.jsxs)("div",{className:h.a.imgWrapper,id:"imgWrapper",children:[Object(O.jsx)("embed",{src:e.url,alt:"loading"}),Object(O.jsxs)("a",{href:e.url,target:"_blank",children:[Object(O.jsx)("div",{className:h.a.view,children:"view"})," "]})]}):"",Object(O.jsx)("div",{style:{color:"whitesmoke"},children:e.text})]}),Object(O.jsxs)("div",{className:h.a.details,style:{alignSelf:!0===e.sender?"flex-end":"flex-start"},children:[e.time.toLocaleDateString()," ",e.time.toLocaleTimeString()]})]})})},_=a(33),v=_.a.initializeApp({apiKey:"AIzaSyA20No1Szz3Gu2aLWUjv-AwqLALwHCl12Y",authDomain:"sandesh-chatting-app.firebaseapp.com",projectId:"sandesh-chatting-app",storageBucket:"sandesh-chatting-app.appspot.com",messagingSenderId:"128133152544",appId:"1:128133152544:web:01b451d3fdae452fc16145"}),y=v.firestore(),N=v.storage(),w=y,S=a(48),R=a.p+"static/media/insight-578.e7e8aabb.mp3",C=a.p+"static/media/done-for-you-612.f1aedf04.mp3",k=a(11),E=function(){var e=Object(n.useState)(.3),t=Object(m.a)(e,2),a=t[0],r=(t[1],Object(S.a)(R,{volume:a})),s=Object(m.a)(r,1)[0],o=Object(S.a)(C,{volume:a}),d=Object(m.a)(o,1)[0],j=Object(n.useRef)(null),b=Object(n.useState)(""),f=Object(m.a)(b,2),h=f[0],v=f[1],y=Object(n.useState)(""),E=Object(m.a)(y,2),M=E[0],T=E[1],I=Object(n.useState)([]),B=Object(m.a)(I,2),D=B[0],J=B[1],L=Object(n.useState)({username:null}),P=Object(m.a)(L,2),A=P[0],q=P[1],F=Object(n.useState)({image:null}),W=Object(m.a)(F,2),U=W[0],V=W[1],z=Object(k.f)(),K=Object(n.useState)(1),G=Object(m.a)(K,2),H=G[0],Q=G[1];Object(n.useEffect)((function(){var e;null===(e=j.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}),H>1&&D.length>0&&D[D.length-1].username!=h&&s(),Q((function(e){return e+1}))}),[D]),Object(n.useEffect)((function(){document.documentElement.style.setProperty("--base-color","#".concat(z.pickcolor)),document.documentElement.style.setProperty("--base-transparent","#".concat(z.pickcolor,"99")),w.collection(z.roomName).orderBy("timestamp","asc").onSnapshot((function(e){J(e.docs.map((function(e){return e.data()})))})),w.collection("typer").doc(z.roomName).onSnapshot((function(e){q(e.data())}))}),[]),Object(n.useEffect)((function(){null!=A.username&&""!==A.username||(w.collection("typer").doc(z.roomName).set({username:h}),setTimeout((function(){w.collection("typer").doc(z.roomName).set({username:null})}),1e3))}),[M]),Object(n.useEffect)((function(){var e=z.userName;v(null==e||""==e?"unknown":e)}),[]);var Y=function(){var e=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=null,null!=U.image?N.ref("images/".concat(U.image.name)).put(U.image).on(_.a.storage.TaskEvent.STATE_CHANGED,(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100,2);document.getElementById("progress").style.width="".concat(t,"%"),console.log(t),console.log(e.bytesTransferred)}),(function(e){alert("upload failed!")}),Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.getElementById("progress").style.width="0",e.next=3,N.ref("images").child(U.image.name).getDownloadURL();case 3:a=e.sent,w.collection(z.roomName).add({message:M,imageUrl:a,username:h,timestamp:_.a.firestore.FieldValue.serverTimestamp()}),V({image:null}),document.getElementById("file").value=null,d(),T("");case 9:case"end":return e.stop()}}),e)})))):(w.collection(z.roomName).add({message:M,imageUrl:a,username:h,timestamp:_.a.firestore.FieldValue.serverTimestamp()}),V({image:null}),document.getElementById("file").value=null,d(),T(""));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("div",{className:u.a.container,children:Object(O.jsxs)("div",{className:u.a.card,children:[Object(O.jsxs)("div",{className:u.a.logo,children:[Object(O.jsx)(p.a,{className:u.a.icon}),Object(O.jsx)("div",{className:u.a.typer,children:null===A.username||A.username===h||""===A.username?"":"".concat(A.username," is typing...")})]}),Object(O.jsx)("div",{className:u.a.messages,children:D.map((function(e){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(x,{text:e.message,sender:e.username===h,name:e.username===h?"":e.username,time:e.timestamp?new Date(1e3*e.timestamp.seconds):new Date,url:e.imageUrl}),Object(O.jsx)("div",{ref:j})]})}))}),Object(O.jsx)("div",{className:u.a.type,children:Object(O.jsxs)("form",{onSubmit:Y,children:[Object(O.jsx)("div",{className:u.a.progress,id:"progress"}),Object(O.jsx)("textarea",{placeholder:"Type your message...",onChange:function(e){T(e.target.value)},value:M}),Object(O.jsx)("input",{id:"file",type:"file",onChange:function(e){V((function(t){return Object(c.a)(Object(c.a)({},t),{},{image:e.target.files[0]})}))}}),Object(O.jsx)("button",{type:"submit",className:u.a.submit,children:Object(O.jsx)(g.a,{})})]})})]})})})},M=a(34),T=a.n(M),I=a(97),B=a(28),D=function(){return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("div",{className:T.a.container,children:Object(O.jsxs)("div",{className:T.a.card,children:[Object(O.jsx)(B.b,{to:"/create-room",style:{textDecoration:"none"},children:Object(O.jsx)("div",{children:Object(O.jsx)(I.a,{variant:"contained",color:"primary",className:T.a.createRoom,children:"Create a Room"})})}),Object(O.jsx)("div",{className:T.a.separator,children:"OR"}),Object(O.jsx)(B.b,{to:"/join-room",style:{textDecoration:"none"},children:Object(O.jsx)("div",{children:Object(O.jsx)(I.a,{variant:"contained",color:"secondary",className:T.a.createRoom,children:"Join a Room"})})})]})})})},J=a(35),L=a.n(J),P=function(e){var t=Object(n.useState)(""),a=Object(m.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)(""),o=Object(m.a)(c,2),i=o[0],l=o[1],d=Object(n.useState)(""),u=Object(m.a)(d,2),j=u[0],p=u[1],b=Object(n.useState)([]),g=Object(m.a)(b,2),f=g[0],h=g[1],x=Object(n.useState)("#000080"),_=Object(m.a)(x,2),v=_[0],y=_[1],N=!1;Object(n.useEffect)((function(){w.collection("chatrooms").onSnapshot((function(e){h(e.docs.map((function(e){return e.data()})))}))}),[]);return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("div",{className:L.a.container,children:Object(O.jsx)("div",{className:L.a.card,children:Object(O.jsxs)("form",{autoComplete:"off",onSubmit:function(t){t.preventDefault(),f.forEach((function(e){e.roomname===r&&e.roompassword===i&&(N=!0)})),!0===N?e.history.push("/messenger/".concat(r,"/").concat(j,"/").concat(v.substring(1))):setTimeout((function(){return alert("Invalid chat room name or password!")}),100),s(""),l("")},children:[Object(O.jsx)("div",{className:L.a.heading,children:"Join Room"}),Object(O.jsx)("input",{type:"text",placeholder:"enter chat room name",onChange:function(e){s(e.target.value)},required:!0,value:r}),Object(O.jsx)("input",{type:"password",placeholder:"enter room password",onChange:function(e){l(e.target.value)},required:!0,value:i}),Object(O.jsx)("input",{type:"text",placeholder:"enter user name",onChange:function(e){p(e.target.value)},required:!0,value:j}),Object(O.jsxs)("div",{className:L.a.colorPicker,children:[Object(O.jsxs)("span",{style:{color:"salmon",fontSize:"0.8em",fontWeight:"bold"},children:["Pick your fav color :"," "]}),Object(O.jsx)("input",{type:"color",onChange:function(e){y(e.target.value)}})]}),Object(O.jsx)(I.a,{className:L.a.btn,type:"submit",variant:"contained",color:"secondary",children:"Join"})]})})})})},A=a(36),q=a.n(A),F=function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(""),c=Object(m.a)(s,2),o=c[0],i=c[1],l=Object(n.useState)([]),d=Object(m.a)(l,2),u=d[0],j=d[1],p=!1;Object(n.useEffect)((function(){w.collection("chatrooms").onSnapshot((function(e){j(e.docs.map((function(e){return e.data()})))}))}),[]);return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("div",{className:q.a.wrapper,children:Object(O.jsx)("div",{className:q.a.card,children:Object(O.jsxs)("form",{autoComplete:"off",onSubmit:function(e){e.preventDefault(),u.forEach((function(e){e.roomname===a&&(p=!0)})),1==p?setTimeout((function(){return alert("Chat room already exist! Please enter different name.")}),100):(w.collection("chatrooms").add({roomname:a,roompassword:o}),setTimeout((function(){return alert("Chat room created successfully!")}),100)),r(""),i("")},children:[Object(O.jsx)("div",{className:q.a.heading,children:"Create Room"}),Object(O.jsx)("input",{type:"text",placeholder:"enter chat room name",onChange:function(e){r(e.target.value)},required:!0,value:a}),Object(O.jsx)("input",{type:"password",placeholder:"enter room password",onChange:function(e){i(e.target.value)},required:!0,value:o,className:q.a.password}),Object(O.jsx)(I.a,{className:q.a.btn,type:"submit",variant:"contained",color:"primary",children:"Create"})]})})})})},W=function(){return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(B.a,{children:Object(O.jsxs)(k.c,{children:[Object(O.jsx)(k.a,{exact:!0,path:"/join-room",component:P}),Object(O.jsx)(k.a,{exact:!0,path:"/create-room",component:F}),Object(O.jsx)(k.a,{exact:!0,path:"/messenger/:roomName/:userName/:pickcolor",component:E}),Object(O.jsx)(k.a,{path:"/",component:D})]})})})};s.a.render(Object(O.jsx)(W,{}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.3895bf7e.chunk.js.map